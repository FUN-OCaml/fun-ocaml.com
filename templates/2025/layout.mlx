open JSX

let description = "Fun OCaml 2025 is a 2 days open source hacking event dedicated to OCaml enthusiasts and professionals around the globe! Let's get together for an exhilarating event packed with creativity, innovation, and learning!"
let social_media_preview_src = "https://fun-ocaml.com/2025/social-media-preview.png?1"

let navigation_link ~href ~title =
  <a class_="px-4 h-full items-center hover:text-primary_dark" href=(href)>(string title)</a>

let navigation_button ~href ~title =
  <a class_="inline-flex font-montserrat text-white bg-primary_light px-4 py-2" href=(href)>(string title)</a>

let navigation children =
  <nav class_="bg-[#1A202C] overflow-hiddne max-w-screen text-white">
    <div class_="md:container flex flex-col gap-2 items-start mx-auto py-2 lg:py-0 px-6 md:flex-row md:items-center">
      <a class_="px-2 pt-3 hidden md:inline" href="/#event"><img src="/2025/img/fun-ocaml-logo.svg" alt="Fun OCaml Logo" width="120" height="50"/></a>
      (list children)
    </div>
  </nav>

let email_link ~id ~user host =
  list [
    <a id=(id)></a>;
    <script>
  (Format.sprintf {|
  (function (){
    let user = "%s";
    let host = "%s";
    let elink = document.getElementById("%s");
    elink.href = `mailto:${user}@${host}`;
    elink.innerHTML = `${user}@${host}`;
  })()
  |} user host id |> unsafe)
    </script>
  ]

let make ~title ~children () =
  let title = "Fun OCaml 2025: " ^ title in
  <html lang="en">
    <head>
      <meta charset="utf-8"/>
      <title>(string title)</title>
      <meta name="description" content=(description)/>
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      
      (* Preload critical resources for LCP optimization *)
      <link rel="preload" href="/2025/img/hero-background.webp" as_="image" type_="image/webp"/>
      <link rel="preload" href="font-files/Inter-Bold.woff2" as_="font" type_="font/woff2" crossorigin="anonymous"/>
      <link rel="preload" href="font-files/Montserrat-Bold.woff2" as_="font" type_="font/woff2" crossorigin="anonymous"/>
      
      (* Async load CSS to avoid render blocking *)
      <link rel="preload" href="/css/main.css" as_="style" onload="this.onload=null;this.rel='stylesheet'"/>
      <noscript><link rel="stylesheet" href="/css/main.css"/></noscript>
      
      <link rel="preload" href="font-files/inter.css" as_="style" onload="this.onload=null;this.rel='stylesheet'"/>
      <noscript><link rel="stylesheet" href="font-files/inter.css"/></noscript>
      
      <link rel="preload" href="font-files/Montserrat.css" as_="style" onload="this.onload=null;this.rel='stylesheet'"/>
      <noscript><link rel="stylesheet" href="font-files/Montserrat.css"/></noscript>

      <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/>
      <link rel="icon" type_="image/png" sizes="32x32" href="/favicon-32x32.png"/>
      <link rel="icon" type_="image/png" sizes="16x16" href="/favicon-16x16.png"/>
      <link rel="manifest" href="/site.webmanifest"/>
      <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"/>
      <meta name="msapplication-TileColor" content="#da532c"/>
      <meta name="theme-color" content="#ffffff"/>

      <meta property="og:title" content=(title)/>
      <meta property="og:description" content=(description)/>
      <meta property="og:image" content=(social_media_preview_src)/>
      <meta property="og:site_name" content=(title)/>
      <meta property="og:url" content="https://fun-ocaml.com"/>
      <meta name="twitter:card" content="summary_large_image"/>
      <meta name="twitter:title" content=(title)/>
      <meta name="twitter:description" content=(description)/>
      <meta name="twitter:image" content=(social_media_preview_src)/>
      (* <meta name="twitter:site" content="@fun_ocaml"> *)
      <script src="https://analytics.ahrefs.com/analytics.js" dataKey="INJ8YGRMW+NCMPy+IEhl+g" async=(true)></script>
    </head>
    <body>
      <main>
        (list children)
      </main>
      (navigation [
        navigation_link ~href:"/privacy" ~title:"Privacy Policy";
        navigation_link ~href:"/2024" ~title:"FUN OCaml 2024"
      ])
    </body>
  </html>

